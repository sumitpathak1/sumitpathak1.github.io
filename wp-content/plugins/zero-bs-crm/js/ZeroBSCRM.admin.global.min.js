function zbscrm_JS_DAL(){var e=2;return e=void 0!==zbs_root.dal?parseInt(zbs_root.dal):e}function jpcrm_dismiss_woo_notice(){jQuery(document).on("click","#woo-promo .notice-dismiss",function(e){data={action:"jpcrm_hide_woo_promo"},jQuery.post(ajaxurl,data,function(e){})})}function jpcrm_dismiss_tracking_notice(){jQuery(document).on("click","#track-notice .notice-dismiss",function(e){data={action:"jpcrm_hide_track_notice"},jQuery.post(ajaxurl,data,function(e){})})}function jpcrm_dismiss_feature_alert(){jQuery(document).on("click",".jpcrm_feature_alert .notice-dismiss",function(e){data={action:"jpcrm_hide_feature_alert",feature_alert:this.parentElement.id},jQuery.post(ajaxurl,data,function(e){})})}function zbscrm_JS_compatClasses(){"material"==window.zbscrmjs_custom_admin&&jQuery("body").addClass("zbs-compat-material-admin")}function zbscrm_JS_momentInit(){void 0!==window.zbs_root.locale_short&&"en"!=window.zbs_root.locale_short&&moment.locale(window.zbs_root.locale_short);var o=0;void 0!==window.zbs_root.timezone_offset_mins&&(o=parseInt(window.zbs_root.timezone_offset_mins)),jQuery(".zbs-datemoment-since").each(function(e,t){var n;jQuery(this).attr("data-zbs-created-uts")&&0<(n=parseInt(jQuery(this).attr("data-zbs-created-uts")))&&(n=moment.unix(n).utcOffset(o),jQuery(this).html(n.fromNow()))})}jQuery(function(){zbscrm_JS_momentInit(),zbscrm_JS_infoBoxInit(),zbscrm_JS_Bind_Typeaheads(),zbscrm_JS_bindDateRangePicker(),zbscrm_JS_bindFieldValidators(),zbscrm_JS_bindCloseLogs(),zbscrm_JS_watchInputsAndDirty(),zbscrm_JS_dirtyCatch(),zbscrm_JS_adminMenuDropdown(),zbscrm_JS_compatClasses(),zeroBSCRMJS_bindScreenOptions(),zeroBSCRMJS_bindGlobalObjFuncs(),zeroBSCRMJS_bindGlobalDismiss(),jpcrm_bind_licensing_modals(),jpcrm_dismiss_woo_notice(),jpcrm_dismiss_tracking_notice(),jpcrm_dismiss_feature_alert(),jpcrm_bind_customfield_csv_builders(),jpcrm_bind_generic_window_opening()});var zbscrmjs_adminMenuBlocker=!(jQuery.fn.insertIntoTextArea=function(e){return this.each(function(){selectionStart=this.selectionStart,selectionEnd=this.selectionEnd,do_select=selectionStart!=selectionEnd,old_val=this.value,new_val=old_val.slice(0,selectionStart)+e+old_val.slice(selectionEnd),this.value=new_val,do_select&&(this.selectionStart=selectionStart,this.selectionEnd=selectionStart+e.length),this.focus()})});function zbscrm_JS_adminMenuDropdown(){zbscrm_JS_initMenuPopups(),jQuery(function(){if(1===window.zbscrmjs_hopscotch_virgin&&"undefined"!=typeof hopscotch&&jQuery("#zbs-admin-top-bar").length){try{null!=hopscotch.getState()&&hopscotch.endTour()}catch(e){}void 0===window.zbscrmjs_hopscotch_squash&&hopscotch.startTour(window.zbsTour,0)}}),zbscrm_JS_isCalypso()&&(window.zbscrm_JS_wpwraptop=jQuery("#wpwrap").css("top"),setTimeout(function(){jQuery("#zbs-main-logo-wrap").hasClass("menu-open")||zbscrm_JS_fullscreenModeOn(jQuery("#zbs-main-logo-wrap"))},0)),jQuery("#zbs-main-logo-wrap").off("click").on("click",function(e){window.zbscrmjs_adminMenuBlocker||(window.zbscrmjs_adminMenuBlocker=!0,(jQuery(this).hasClass("menu-open")?zbscrm_JS_fullscreenModeOn:zbscrm_JS_fullscreenModeOff)(this))})}function zbscrm_JS_fullscreenModeOn(e){jQuery("body").addClass("zbs-fullscreen"),jQuery(e).removeClass("menu-open"),jQuery("#wpadminbar, #adminmenuback, #adminmenuwrap, #calypso-sidebar-header").hide(),zbscrm_JS_isCalypso()&&void 0!==window.zbscrm_JS_wpwraptop&&jQuery("#wpwrap").css("top",0),"undefined"!=typeof hopscotch&&hopscotch.refreshBubblePosition();e={action:"zbs_admin_top_menu_save",sec:window.zbscrmjs_topMenuSecToken,hide:1};jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbscrmjs_adminMenuBlocker=!1},error:function(e){window.zbscrmjs_adminMenuBlocker=!1}})}function zbscrm_JS_fullscreenModeOff(e){jQuery("body").removeClass("zbs-fullscreen"),jQuery(e).addClass("menu-open"),jQuery("#wpadminbar, #adminmenuback, #adminmenuwrap, #calypso-sidebar-header").show(),zbscrm_JS_isCalypso()&&void 0!==window.zbscrm_JS_wpwraptop&&jQuery("#wpwrap").css("top",window.zbscrm_JS_wpwraptop),"undefined"!=typeof hopscotch&&hopscotch.refreshBubblePosition();e={action:"zbs_admin_top_menu_save",sec:window.zbscrmjs_topMenuSecToken,hide:0};jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbscrmjs_adminMenuBlocker=!1},error:function(e){window.zbscrmjs_adminMenuBlocker=!1}})}function zbscrm_JS_initMenuPopups(){void 0!==jQuery("#zbs-user-menu-item").popup&&jQuery("#zbs-user-menu-item").popup({popup:jQuery("#zbs-user-menu"),hoverable:!0,on:"hover"})}var zbscrmjsDirtyLog={};function zbscrm_JS_watchInputsAndDirty(){jQuery(".zbs-watch-input").each(function(e,t){t=jQuery(t).attr("name")+"_dirtyflag";0<jQuery("#"+t).length&&(window.zbscrmjsDirtyLog[t]=jQuery(this).val())}),jQuery(".zbs-watch-input").on("change",function(){var e=jQuery(this).attr("name")+"_dirtyflag";0<jQuery("#"+e).length&&(jQuery(this).val()!=window.zbscrmjsDirtyLog[e]?jQuery("#"+e).val("1"):jQuery("#"+e).val("0"))})}var zbscrmjsPageChanges={},zbscrmjsPageData={};function zbscrm_JS_dirtyCatch(){jQuery(".zbs-dc").each(function(e,t){window.zbscrmjsPageData[jQuery(t).attr("name")]=jQuery(this).val()}),jQuery(".zbs-dc").on("change",function(){(jQuery(this).val()!=window.zbscrmjsPageData[jQuery(this).attr("name")]?zbscrm_JS_addDirty:zbscrm_JS_delDirty)(jQuery(this).attr("name"))})}function zbscrm_JS_addDirty(e){window.zbscrmjsPageChanges[e]=1}function zbscrm_JS_delDirty(e){delete window.zbscrmjsPageChanges[e]}function zbscrm_JS_bindDateRangePicker(e){jpcrm_js_bind_datepicker(e),jpcrm_js_bind_daterangepicker(e),jpcrm_js_bind_datetimerangepicker(e),jpcrm_js_bind_datetimepicker(e),jpcrm_js_bind_datetimepicker_future(e)}function jpcrm_js_bind_datepicker(e,o){var r;"function"==typeof jQuery(".jpcrm-date").daterangepicker&&(r={singleDatePicker:!0,showDropdowns:!0,timePicker:!1,locale:{format:"YYYY-MM-DD",cancelLabel:"Clear"}},void 0!==window.zbs_root.localeOptions&&(r.locale=zbscrm_JS_clone(window.zbs_root.localeOptions)),e&&jQuery.extend(r,e),jQuery(".jpcrm-date, .zbs-date").each(function(e,t){var n=zbscrm_JS_clone(r);jQuery(t).attr("data-date-picker-format")&&(n.locale.format=jQuery(t).attr("data-date-picker-format")),jQuery(t).filter(".jpcrm-empty-start, .zbs-empty-start, .jpcrm-custom-field, .zbs-custom-field").length?(n.autoUpdateInput=!1,n.minDate=moment([1900]),n.maxDate=moment().add(50,"years"),jQuery(t).daterangepicker(n,function(e){this.element.val(e.format(n.locale.format))})):jQuery(t).daterangepicker(n,o)}),jQuery(".jpcrm-date.jpcrm-empty-start, .jpcrm-date.jpcrm-custom-field, .zbs-date.zbs-empty-start, .zbs-date.zbs-custom-field").on("apply.daterangepicker",function(e,t){""==t.element.val()&&t.callback(t.startDate)}))}function jpcrm_js_bind_daterangepicker(e,o){var r;"function"==typeof jQuery(".jpcrm-date").daterangepicker&&(r={alwaysShowCalendars:!0,opens:"left",showDropdowns:!0,timePicker:!1,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"YYYY-MM-DD",cancelLabel:"Clear"}},void 0!==window.zbs_root.localeOptions&&(r.locale=zbscrm_JS_clone(window.zbs_root.localeOptions)),e&&jQuery.extend(r,e),jQuery(".jpcrm-date-range, .zbs-date-range").each(function(e,t){var n=zbscrm_JS_clone(r);jQuery(t).attr("data-date-picker-format")&&(n.locale.format=jQuery(t).attr("data-date-picker-format")),jQuery(t).daterangepicker(n,o)}))}function jpcrm_js_bind_datetimerangepicker(e,o){var r;"function"==typeof jQuery(".jpcrm-date").daterangepicker&&(r={timePicker:!0,showDropdowns:!0,opens:"left",ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"YYYY-MM-DD",cancelLabel:"Clear"}},void 0!==window.zbs_root.localeOptions&&(r.locale=zbscrm_JS_clone(window.zbs_root.localeOptions)),e&&jQuery.extend(r,e),r.locale.format&&-1==r.locale.format.indexOf("hh:mm")&&(r.locale.format+=" hh:mm A"),jQuery(".jpcrm-datetime-range, .zbs-datetime-range").each(function(e,t){var n=zbscrm_JS_clone(r);jQuery(t).attr("data-date-picker-format")&&(n.locale.format=jQuery(t).attr("data-date-picker-format")),jQuery(t).daterangepicker(n,o)}))}function jpcrm_js_bind_datetimepicker(e,o){var r;"function"==typeof jQuery(".jpcrm-date").daterangepicker&&(r={singleDatePicker:!0,timePicker:!0,showDropdowns:!0,locale:{format:"YYYY-MM-DD",cancelLabel:"Clear"}},void 0!==window.zbs_root.localeOptions&&(r.locale=zbscrm_JS_clone(window.zbs_root.localeOptions)),e&&jQuery.extend(r,e),r.locale.format&&-1==r.locale.format.indexOf("hh:mm")&&(r.locale.format+=" hh:mm A"),jQuery(".jpcrm-date-time, .zbs-date-time").not(".jpcrm-date-time-future").not(".zbs-date-time-future").each(function(e,t){var n=zbscrm_JS_clone(r);jQuery(t).attr("data-date-picker-format")&&(n.locale.format=jQuery(t).attr("data-date-picker-format")),jQuery(t).daterangepicker(n,o)}))}function jpcrm_js_bind_datetimepicker_future(e,o){var r;"function"==typeof jQuery(".jpcrm-date").daterangepicker&&(r={singleDatePicker:!0,timePicker:!0,showDropdowns:!0,locale:{format:"YYYY-MM-DD",cancelLabel:"Clear"},minDate:new Date},void 0!==window.zbs_root.localeOptions&&(r.locale=zbscrm_JS_clone(window.zbs_root.localeOptions)),e&&jQuery.extend(r,e),r.locale.format&&-1==r.locale.format.indexOf("hh:mm")&&(r.locale.format+=" hh:mm A"),jQuery(".jpcrm-date-time-future, .zbs-date-time-future").not(".zbs-date-time").not(".jpcrm-date-time").each(function(e,t){var n=zbscrm_JS_clone(r);jQuery(t).attr("data-date-picker-format")&&(n.locale.format=jQuery(t).attr("data-date-picker-format")),jQuery(t).daterangepicker(n,o)}))}function zbscrm_JS_bindFieldValidators(){jQuery(".numbersOnly, .jpcrm-inputmask-float").off("keyup").on("keyup",function(){var e=this.value.replace(/[^-0-9\.]/g,"");this.value!=e&&(this.value=e)}),jQuery(".intOnly, .jpcrm-inputmask-int").off("keyup").on("keyup",function(){var e=this.value.replace(/[^-0-9]/g,"");this.value!=e&&(this.value=e)})}function zbscrm_JS_infoBoxInit(){jQuery(".zbs-infobox").each(function(e,t){var n=jQuery(t).html();jQuery(t).html('<i class="fa fa-info-circle zbs-help-ico"></i><div class="zbs-infobox-detail"></div>'),setTimeout(function(){var e=t;jQuery(".zbs-infobox-detail",jQuery(e)).html(n),jQuery(e).addClass("zbs-live"),setTimeout(function(){jQuery(".zbs-infobox").on("mouseenter",function(){jQuery("i.zbs-help-ico",jQuery(this)).css("opacity","1"),jQuery(".zbs-infobox-detail",jQuery(this)).show()}).on("mouseleave",function(){jQuery("i.zbs-help-ico",jQuery(this)).css("opacity","0.6"),jQuery(".zbs-infobox-detail",jQuery(this)).hide()})},0)},0)})}function zbscrm_JS_Bind_Typeaheads(){zbscrm_JS_Bind_Typeaheads_Customers(),zbscrm_JS_Bind_Typeaheads_Companies(),jpcrm_bind_typeaheads_placeholders()}function zbscrm_JS_Bind_Typeaheads_Customers(){var e;0<jQuery(".zbstypeaheadwrap .zbstypeahead").length&&(e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},prefetch:{url:window.zbscrmBHURLCustomers,ttl:3e5,transform:function(e){return jQuery.map(e,function(e){return{id:e.id,name:e.name,created:e.created,email:e.email}})}},remote:{url:window.zbscrmBHURLCustomers+"&s=%QUERY",wildcard:"%QUERY",transform:function(e){return jQuery.map(e,function(e){return{id:e.id,name:e.name,created:e.created,email:e.email}})}}}),jQuery(".zbstypeaheadwrap .zbstypeahead").each(function(){jQuery(this).typeahead({hint:!0,highlight:!0,minLength:1},{name:"customers",source:e,display:function(e){return e.name.trim()?e.name:e.email||"Contact #"+e.id},limit:10,templates:{suggestion:function(e){var t=e.name.trim()?e.name:zeroBSCRMJS_globViewLang("contact")+" #"+e.id,e=e.email||"<i>no email</i>";return sug='<div class="sug-wrap"><div class="name">'+t+'</div><div class="email">'+e+'</div></div><div class="clear"></div>'}}}),setTimeout(function(){var e=(new Date).getTime(),t=jQuery(this).attr("data-autokey"),e="zbsco-"+e+"-"+(t=void 0===t?"-typeahead":t);jQuery(".zbstypeahead").attr("autocomplete",e).attr("name",e)},0),jQuery(this).on("typeahead:open",function(e,t){var n=(new Date).getTime(),o=jQuery(this).attr("data-autokey"),n="zbsco-"+n+"-"+(o=void 0===o?"-typeahead":o);jQuery(".zbstypeahead").attr("autocomplete",n).attr("name",n)});var n=jQuery(this).attr("data-zbsopencallback"),o=("string"==typeof n&&0<n.length&&jQuery(this).on("typeahead:select",function(e,t){"function"==typeof window[n]&&window[n](t)}),jQuery(this).attr("data-zbschangecallback"));"string"==typeof o&&0<o.length&&jQuery(this).on("typeahead:change",function(e,t){"function"==typeof window[o]&&window[o](t)})}))}function zbscrm_JS_Bind_Typeaheads_Companies(){var e;0<jQuery(".zbstypeaheadwrap .zbstypeaheadco").length&&(e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},prefetch:{url:window.zbscrmBHURLCompanies,ttl:3e5,transform:function(e){return jQuery.map(e,function(e){var t={id:e.id,name:e.name,created:e.created,email:""};return void 0!==e.meta&&void 0!==e.meta.email&&(t.email=e.meta.email),t})}},remote:{url:window.zbscrmBHURLCompanies+"&s=%QUERY",wildcard:"%QUERY",transform:function(e){return jQuery.map(e,function(e){var t={id:e.id,name:e.name,created:e.created,email:""};return void 0!==e.meta&&void 0!==e.meta.email&&(t.email=e.meta.email),t})}}}),jQuery(".zbstypeaheadwrap .zbstypeaheadco").each(function(){jQuery(this).typeahead({hint:!0,highlight:!0,minLength:1},{name:"companies",source:e,display:"name",limit:10}),setTimeout(function(){var e=(new Date).getTime(),t=jQuery(this).attr("data-autokey"),e="zbsco-"+e+"-"+(t=void 0===t?"-typeahead":t);jQuery(".zbstypeaheadco").attr("autocomplete",e).attr("name",e)},0),jQuery(this).on("typeahead:open",function(e,t){var n=(new Date).getTime(),o=jQuery(this).attr("data-autokey"),n="zbsco-"+n+"-"+(o=void 0===o?"-typeahead":o);jQuery(".zbstypeaheadco").attr("autocomplete",n).attr("name",n)});var n=jQuery(this).attr("data-zbsopencallback"),o=("string"==typeof n&&0<n.length&&jQuery(this).on("typeahead:select",function(e,t){"function"==typeof window[n]&&window[n](t)}),jQuery(this).attr("data-zbschangecallback"));"string"==typeof o&&0<o.length&&jQuery(this).on("typeahead:change",function(e,t){"function"==typeof window[o]&&window[o](t)})}))}function jpcrm_bind_typeaheads_placeholders(){jQuery(".jpcrm-placeholder-select").off("change").on("change",function(){var e=jQuery(this).attr("data-target"),t=jQuery(this).val();t&&-1!=t&&1==jQuery("#"+e).length&&(jQuery("#"+e).insertIntoTextArea(t),jQuery("#jpcrm-mail-template-editor-placeholders")[0].selectedIndex=0)})}function zbscrm_js_uiSpinnerBlocker(e){return'<div class="zbsSpinnerBlocker"><div class="zbsSpinnerBG"></div><div class="zbsSpinnerIco">'+(void 0!==e?e:'<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i>')+"</div></div>"}var zbscrm_custcache_invoices={};function zbscrm_js_getCustInvs(t,n,o){if(void 0!==t&&0<t){if(void 0!==window.zbscrm_custcache_invoices[t])return"function"==typeof n&&n(window.zbscrm_custcache_invoices[t]),window.zbscrm_custcache_invoices[t];var e={action:"getinvs",sec:window.zbs_root.zbsnonce,cid:t};jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){return window.zbscrm_custcache_invoices[t]=e,"function"==typeof n&&n(e),e},error:function(e){"function"==typeof o&&o(e)}})}else"function"==typeof o&&o({fail:1});return!1}function zbscrm_JS_clone(e){if(null==e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function zbscrm_JS_validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function zbscrmjs_prettifyLongInts(e){return null==e?0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function zbscrmjs_permify(e){e=zbscrmjs_replaceAll(e," ","_");return(e=zbscrmjs_replaceAll(e,":","_")).toLowerCase()}function zbscrmjs_replaceAll(e,t,n){return e.replace(new RegExp(t,"g"),n)}function zbscrmjs_nl2br(e,t){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function zbscrmjs_reversenl2br(e,t){t=void 0!==t?"\r\n":"";return e.split("<br />").join(t)}function ucwords(e){return(e+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(e){return e.toUpperCase()})}function jpcrm_abbreviate_str(e,t,n,o){if((e="number"==typeof e?e.toString():e)!=e.replace(/(<([^>]+)>)/gi,""))switch(o){case"return":return e;case"strip":e=e.replace(/(<([^>]+)>)/gi,"")}return e.length<=t?e:e.substr(0,e.lastIndexOf(" ",t))+n}function empty(e){return!e||0===e.length}function zeroBSCRMJS_telLinkFromNo(e,t,n){return'<a href="tel:'+e+'" class="'+n+'">'+t+"</a>"}function zeroBSCRMJS_telURLFromNo(e){return void 0!==window.zbsClick2CallType&&2==window.zbsClick2CallType?"callto:"+e:"tel:"+e}function zeroBSCRMJS_isArray(e){return!!e&&e.constructor===Array}function zeroBSCRMJS_ucwords(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function jpcrm_strip_trailing_slashes(e){return e.replace(/\/+$/,"")}function zeroBSCRMJS_formatCurrency(e){var t="en-US";return""!=(t=void 0!==window.zbs_root&&void 0!==window.zbs_root.locale?window.zbs_root.locale:t)?(t=t.replace(/_/,"-"),new Intl.NumberFormat(t,{style:"currency",currency:window.zbs_root.currencyOptions.currencyStr,minimumFractionDigits:window.zbs_root.currencyOptions.noOfDecimals}).format(e)):window.zbs_root.currencyOptions.symbol+zeroBSCRMJS_number_format_i18n(e)}function zeroBSCRMJS_number_format_i18n(e,t){return void 0===t&&(t=0),void 0!==window.zbswplocale?zeroBSCRMJS_number_format(e,t,window.zbswplocale.decimal_point,window.zbswplocale.thousands_sep):zeroBSCRMJS_number_format(e,t)}function zeroBSCRMJS_number_format(e,t,n,o){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+e)?+e:0,t=isFinite(+t)?Math.abs(t):0,o=void 0===o?",":o,n=void 0===n?".":n,r="";return 3<(r=(t?function(e,t){t=Math.pow(10,t);return""+Math.round(e*t)/t}(e,t):""+Math.round(e)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(n)}function zeroBSCRMJS_htmlEncode(e){return jQuery("<div/>").text(e).html()}function zeroBSCRMJS_htmlDecode(e){return jQuery("<div/>").html(e).text()}function zeroBSCRMJS_newWindow(e,t,n,o){return void 0===n&&(n=600),void 0===o&&(o=600),newwindow=window.open(e,t,"height="+n+",width="+o),window.focus&&newwindow.focus(),!1}function zeroBSCRMJS_newWindowCenter(e,t,n,o){var r=null!=window.screenLeft?window.screenLeft:screen.left,i=null!=window.screenTop?window.screenTop:screen.top,a=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,e=window.open(e,t,"scrollbars=yes, width="+n+", height="+o+", top="+(s/2-o/2+i)+", left="+(a/2-n/2+r));window&&window.focus&&e.focus()}function zeroBSCRMJS_extend(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function zeroBSCRMJS_retrieveURLS(e){return/^(https?:\/\/|www\.)\w+(\.\w+)*?(\/[^\s]*)?$/g.exec(e)}function jpcrm_looks_like_URL(e){return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)}function zeroBSCRMJS_retrieveEmails(e){return e.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)}function parseDate(e){e=e.split("/");return new Date(e[2],e[0]-1,e[1])}function daydiff(e,t){return Math.round((t-e)/864e5)}function zbsJS_semanticPercBar(e,t,n){t='<div class="ui progress'+(t=typeof t?" "+t:"")+'"><div class="bar"';return void 0!==e&&(t+=' style="width:'+e+'%"'),t+='><div class="progress">',void 0!==e&&(t+=e+"%"),t+="</div></div>",void 0!==n&&(t+='<div class="label">'+n+"</div>"),t+="</div>"}function zbsJS_uts(){return Math.floor(Date.now()/1e3)}function jpcrm_strip_scripts(e){for(var t=document.createElement("div"),n=(t.innerHTML=e,t.getElementsByTagName("script")),o=n.length;o--;)n[o].parentNode.removeChild(n[o]);return t.innerHTML}function zeroBSCRMJS_genericLoaded(){jQuery(".zbs-generic-loading").hide(),jQuery(".zbs-generic-loaded").show()}function zeroBSCRMJS_genericPostData(e,t,n){var o,r=jQuery('<form id="mapform" action="'+e+'" method="'+t.toLowerCase()+'"></form>');for(o in n)n.hasOwnProperty(o)&&r.append('<input type="hidden" name="'+o+'" id="'+o+'" value="'+n[o]+'" />');jQuery("body").append(r),r.submit()}function jpcrm_sleep(t){return new Promise(e=>setTimeout(e,t))}function zeroBSCRMJS_bindScreenOptions(){jQuery(".zbs-screenoptions-tablecolumns .ui.checkbox").on("click",function(){zeroBSCRMJS_saveScreenOptions()}),jQuery("#zbs-screen-options-handle").off("click").on("click",function(){jQuery("#zbs-screen-options").hasClass("zbs-closed")?jQuery("#zbs-screen-options").removeClass("zbs-closed"):(jQuery("#zbs-screen-options").addClass("zbs-closed"),"function"==typeof zeroBSCRMJS_metaboxManagerSwitchMode&&zeroBSCRMJS_metaboxManagerSwitchMode("off"),zeroBSCRMJS_saveScreenOptions())})}Array.prototype.zbsselect=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return this[t];return null},Date.now||(Date.now=function(){return(new Date).getTime()});var zbscrmjs_screenoptblock=!1;function zbsJS_updateScreenOptions(t,n){window.zbscrmjs_screenoptblock=!0;var e={action:"save_zbs_screen_options",sec:window.zbscrmjs_secToken,screenopts:window.zbsScreenOptions,pagekey:window.zbsPageKey};jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbscrmjs_screenoptblock=!1,"function"==typeof t&&t(e)},error:function(e){window.zbscrmjs_screenoptblock=!1,"function"==typeof n&&n(e)}})}var zbsjsScreenOptsBlock=!1;function zeroBSCRMJS_saveScreenOptions(t){window.zbsjsScreenOptsBlock||(window.zbsjsScreenOptsBlock=!0,void 0===window.zbsScreenOptions&&0!=window.zbsScreenOptions||(window.zbsScreenOptions={mb_normal:{},mb_side:{},mb_hidden:[],mb_mini:[],pageoptions:[],tablecolumns:{}}),zeroBSCRMJS_buildScreenOptionsTableColumns(),zeroBSCRMJS_buildScreenOptionsGenerics(),zbsJS_updateScreenOptions(function(e){window.zbsjsScreenOptsBlock=!1,"function"==typeof t&&t()},function(e){window.zbsjsScreenOptsBlock=!1,"function"==typeof t&&t()}))}function zeroBSCRMJS_buildScreenOptionsTableColumns(){return jQuery.each(["transactions"],function(e,t){var n=[];jQuery("#zbs-tablecolumns-"+t+" .zbs-tablecolumn-checkbox").each(function(e,t){jQuery(this).checkbox("is checked")&&n.push(jQuery(t).attr("data-colkey"))}),void 0===window.zbsScreenOptions.tablecolumns&&(window.zbsScreenOptions.tablecolumns={}),window.zbsScreenOptions.tablecolumns[t]=n}),window.zbsScreenOptions}function zeroBSCRMJS_buildScreenOptionsGenerics(){var e;return 0<jQuery("#zbs-screenoptions-records-per-page").length&&(0<(e=(e=parseInt(jQuery("#zbs-screenoptions-records-per-page").val()))<1?20:e)&&(window.zbsScreenOptions.perpage=e)),window.zbsScreenOptions}var zbsAJAXRestRetrieve=!1;function zeroBSCRMJS_rest_retrieveCompany(e,t,n){void 0!==e&&void 0!==window.zbscrmBHURLCompanies&&(window.zbsAJAXRestRetrieve=!0,e=window.zbscrmBHURLCompanies+"&id="+e,jQuery.ajax({type:"GET",url:e,timeout:1e4,success:function(e){return window.zbsAJAXRestRetrieve=!1,"function"==typeof t&&t(e),!0},error:function(e){return window.zbsAJAXRestRetrieve=!1,"function"==typeof n&&n(e),!1}}))}function zeroBSCRMJS_globViewLang(e,t){return void 0===t&&(t=""),void 0!==window.zbs_root.lang&&void 0!==window.zbs_root.lang[e]?window.zbs_root.lang[e]:t}function zeroBSCRMJS_bindGlobalObjFuncs(){setTimeout(function(){zeroBSCRMJS_bindGlobalContactFuncs()},500)}function zeroBSCRMJS_bindGlobalContactFuncs(){jQuery("#zbs-contact-action-sendstatement").off("click").on("click",function(){var n="",o="";void 0!==jQuery(this).attr("data-sendto")&&(n=jQuery(this).attr("data-sendto")),void 0!==jQuery(this).attr("data-cid")&&(o=parseInt(jQuery(this).attr("data-cid"))),swal({title:'<i class="envelope outline icon"></i> '+zeroBSCRMJS_globViewLang("sendstatement"),html:'<div style="font-size: 1.2em;padding: 0.3em;">'+zeroBSCRMJS_globViewLang("sendstatementaddr")+'<br /><div class="ui input"><input type="text" name="zbs-send-pdf-statement-to-email" id="zbs-send-pdf-statement-to-email" value="'+n+'" placeholder="'+zeroBSCRMJS_globViewLang("enteremail")+'" /></div></div>',type:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_globViewLang("send"),cancelButtonText:zeroBSCRMJS_globViewLang("cancel")}).then(function(e){var t;e.value&&(e=o,t=n,e={action:"zbs_invoice_send_statement",sec:window.zbs_root.zbsnonce,cid:e,em:t},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){window.zbscrmjs_adminMenuBlocker=!1,swal(zeroBSCRMJS_globViewLang("sent"),zeroBSCRMJS_globViewLang("statementsent"),"success")},error:function(e){window.zbscrmjs_adminMenuBlocker=!1,swal(zeroBSCRMJS_globViewLang("notsent"),zeroBSCRMJS_globViewLang("statementnotsent"),"warning")}}))})})}function zeroBSCRMJS_obj_viewLink(e,t){return void 0!==e&&""!=e&&void 0!==t&&""!=t&&void 0!==window.zbs_root.links&&void 0!==window.zbs_root.links.generic_view?window.zbs_root.links.generic_view.replace("_TYPE_",e)+t:"#pagenotfound"}function zeroBSCRMJS_obj_editLink(e,t){return void 0!==e&&""!=e&&void 0!==t&&""!=t&&void 0!==window.zbs_root.links&&void 0!==window.zbs_root.links.generic_edit?window.zbs_root.links.generic_edit.replace("_TYPE_",e)+t:"#pagenotfound"}function zeroBSCRMJS_bindGlobalDismiss(){jQuery(".zbs-dismiss").off("click").on("click",function(e,t){var n=jQuery(this).attr("data-dismiss-key"),o=jQuery(this).attr("data-dismiss-element-id");""===n||window.zbscrmjs_closeLogBlocker||(window.zbscrmjs_closeLogBlocker=!0,n={action:"logclose",sec:window.zbs_root.zbsnonce,closing:n},jQuery.ajax({type:"POST",url:ajaxurl,data:n,dataType:"json",timeout:2e4,success:function(e){jQuery("#"+o).slideUp(),window.zbscrmjs_closeLogBlocker=!1},error:function(e){jQuery("#"+o).slideUp(),window.zbscrmjs_closeLogBlocker=!1}}))})}function jpcrm_set_jpcrm_transient(e,t,n,o,r,i){return""===e||""===t||window.jpcrm_set_jpcrm_transient_blocker||(window.jpcrm_set_jpcrm_transient_blocker=!0,jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"jpcrmsettransient",sec:e,"transient-key":t,"transient-value":n,"transient-expiration":o},dataType:"json",timeout:2e4,success:function(e){return"function"==typeof r&&r(e),!(window.jpcrm_set_jpcrm_transient_blocker=!1)},error:function(e){return"function"==typeof i&&i(e),window.jpcrm_set_jpcrm_transient_blocker=!1}})),!1}var zbscrmjs_closeLogBlocker=!1;function zbscrm_JS_bindCloseLogs(){jQuery(".zbsCloseThisAndLog").on("click",function(){var t,e=jQuery(this).attr("data-closelog");""===e||window.zbscrmjs_closeLogBlocker||(t=this,window.zbscrmjs_closeLogBlocker=!0,e={action:"logclose",sec:window.zbs_root.zbsnonce,closing:e},jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(e){jQuery(t).parent().slideUp(),window.zbscrmjs_closeLogBlocker=!1},error:function(e){jQuery(t).parent().slideUp(),window.zbscrmjs_closeLogBlocker=!1}}))})}function zbscrm_JS_isCalypso(){return jQuery("#calypso-sidebar-header").length}function jpcrm_bind_licensing_modals(){jQuery("#jpcrm-close-licensing-modal").on("click",function(){jpcrm_set_jpcrm_transient(window.jpcrm_modal_message_licensing_nonce,"jpcrm-license-modal","nag",86400,function(e){jQuery("#jpcrm-modal-message-licensing").hide()},function(e){jQuery("#jpcrm-modal-message-licensing").hide()})}),jQuery(".jpcrm-licensing-modal-set-transient-and-go").on("click",function(){var t=jQuery(this).attr("data-href");jpcrm_set_jpcrm_transient(window.jpcrm_modal_message_licensing_nonce,"jpcrm-license-modal","nag",3600,function(e){window.location=t},function(e){window.location=t})})}function jpcrm_bind_customfield_csv_builders(){jQuery(".jpcrm-custom-field-builder span").on("click",function(e){var t=jQuery(e.target).parent().attr("data-target"),e=jQuery(e.target).text(),n=jQuery("#"+t).val(),o=[],r=[];(o=n.split(",")).push(e),jQuery.each(o,function(e,t){var n=t.trim();-1===jQuery.inArray(t,r)&&""!=n&&r.push(n)}),jQuery("#"+t).val(r.join(","))})}function jpcrm_bind_generic_window_opening(){jQuery(".jpcrm-open-popup-href").on("click",function(){var e=jQuery(this).attr("data-href"),t=jQuery(this).attr("data-title"),n=parseInt(jQuery(this).attr("data-width")),o=parseInt(jQuery(this).attr("data-height"));void 0===t&&(t=""),(void 0===n||n<=0)&&(n=600),(void 0===o||o<=0)&&(o=600),void 0!==e&&""!==e&&zeroBSCRMJS_newWindowCenter(e,t,n,o)})}var jpcrm={esc_attr(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},esc_html:function(e){return this.esc_attr(e)}};